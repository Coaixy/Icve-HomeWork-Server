package me.github.coaixy;


import jdk.jshell.execution.Util;
import mjson.Json;

import java.io.FilePermission;
import java.io.IOException;
import java.util.List;

public class Main {
    public static void main(String[] args) throws IOException {
        String filePath = args[0];
        List<String> filePathList = Utils.getAllFile(filePath);
        StringBuilder result = new StringBuilder();
        for (String path : filePathList){
            String textData = Utils.getFileText(path);
            Json questions = Json.read(textData).at("questions");
            for (Json question : questions.asJsonList()){
                Json answers = question.at("answerList");
                String questionId = question.at("questionId").asString();
                String content = "";
                for (Json answer : answers.asJsonList()){
                    if (answer.at("IsAnswer").asString().equals("True")){
                        content = answer.at("Content").asString();
                    }
                }
                result.append(questionId).append("-").append(content).append("\n");
            }
        }
        System.out.println(result);
    }
}